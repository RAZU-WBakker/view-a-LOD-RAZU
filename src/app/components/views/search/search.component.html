<app-view-container>
  <app-drawer />
  <app-lang-select />
  <!--<app-node-document />-->

  <app-header />

  <app-home-intro *ngIf="shouldShowHomeIntro" />

  <div class="flex-grow-0 p-4 pb-2">
    <div class="flex flex-row items-center">
      <app-search-input class="flex-grow" />
      <!--      <app-view-mode-select class="flex-grow-0 ml-8" />-->
    </div>

    <app-active-filters />
  </div>

  <app-home-intro-below-search *ngIf="shouldShowHomeIntro" />
  <div class="w-full p-4 pt-4" *ngIf="Settings.filtering.showFilterPanel">
    <div class="sticky top-0">
      <app-filter-options />
    </div>
  </div>
  <p class="text-xl mb-4 font-bold">
    <span *ngIf="search.isLoading.value" class="loading loading-spinner">
    </span>
    <span *ngIf="!search.isLoading.value && !details.isShowing">{{
      numberOfHitsStr
    }}</span>
  </p>
  <div class="flex h-screen">
    <!-- Filter Column -->
    <div
      class="w-1/6 p-4"
      *ngIf="
        viewModes.current.value === ViewMode.List &&
        Settings.filtering.showFilterPanel
      "
    >
      <div class="sticky top-0">
        <div class="pb-4">Periode</div>
        <app-multi-range></app-multi-range>
      </div>
    </div>
    <div
      class="overflow-y-scroll flex-grow scroll-smooth"
      [ngClass]="[shouldShowHomeIntro ? 'hidden' : '']"
      #scrollContainer
    >
      <app-nodes-grid
        [nodes]="search.results.value.nodes"
        *ngIf="viewModes.current.value === ViewMode.Grid"
        class="w-full"
      />

      <ng-container *ngIf="viewModes.current.value === ViewMode.List">
        <ng-container *ngFor="let node of search.results.value?.nodes">
          <app-node
            [node]="node"
            [id]="nodes.getId(node)"
            *ngIf="details.shouldShowNode(node)"
          ></app-node>
        </ng-container>
      </ng-container>

      <div *ngIf="!details.isShowing">
        <button
          class="btn btn-primary"
          (click)="loadMore()"
          [disabled]="search.isLoading.value"
          *ngIf="search.hasResults"
        >
          <span
            class="loading loading-spinner loading-xs"
            *ngIf="search.isLoading.value"
          ></span>
          <ng-container *transloco="let translateInPlace">{{
            translateInPlace("RESULTS_LOAD_MORE")
          }}</ng-container>
        </button>
      </div>
    </div>
  </div>
  <app-message />
</app-view-container>
